<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Docker基本命令</title>
    <url>/2023/03/21/Docker/</url>
    <content><![CDATA[<h2 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker version				# 显示docker版本信息</span><br><span class="line">docker info					# 显示docker系统信息，包括镜像和容器数量</span><br><span class="line">docker 命令 --help		# 帮助命令</span><br></pre></td></tr></table></figure>

<p><a href="https://docs.docker.com/engine/reference/commandline/">Docker Docs address</a></p>
<h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h3><ul>
<li>查看所有本地主机上的镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zeroti@zeroti_PC:~$ docker images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   7 months ago   13.3kB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解释</span></span><br><span class="line">REPOSITORY	镜像的仓库源</span><br><span class="line">TAG			镜像的标签</span><br><span class="line">IMAGE ID	镜像的id</span><br><span class="line">CREATED		镜像的创建时间</span><br><span class="line">SIZE		镜像的大小</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可选项</span></span><br><span class="line">  -a, --all             # 列出所有的镜像</span><br><span class="line">  -q, --quiet           # 只显示id</span><br></pre></td></tr></table></figure>

<h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><ul>
<li>搜索</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zeroti@zeroti_PC:~$ docker search mysql</span><br><span class="line">NAME                             DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">mysql                            MySQL is a widely used, open-source relation…   12491     [OK]</span><br><span class="line">mariadb                          MariaDB Server is a high performing open sou…   4808      [OK]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可选项，通过收藏来过滤</span></span><br><span class="line">--filter=STARS=3000   # 搜索出来的镜像STARS大于3000</span><br></pre></td></tr></table></figure>

<h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><ul>
<li>下载镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载镜像	docker pull &lt;镜像名&gt;[:tag]</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker pull mysql</span><br><span class="line">Using default tag: latest	# 如果不写 tag，默认是 latest 最新版本</span><br><span class="line">latest: Pulling from library/mysql</span><br><span class="line">4be315f6562f: Pull complete		# 分层下载，docker image的核心，联合文件系统</span><br><span class="line">96e2eb237a1b: Pull complete</span><br><span class="line">8aa3ac85066b: Pull complete</span><br><span class="line">ac7e524f6c89: Pull complete</span><br><span class="line">f6a88631064f: Pull complete</span><br><span class="line">15bb3ec3ff50: Pull complete</span><br><span class="line">ae65dc337dcb: Pull complete</span><br><span class="line">573c3c7fa18d: Pull complete</span><br><span class="line">9d10771b98b8: Pull complete</span><br><span class="line">3d8ef442614b: Pull complete</span><br><span class="line">7dc17a6cea26: Pull complete</span><br><span class="line">752752efdaea: Pull complete</span><br><span class="line">Digest: sha256:2dafe3f044f140ec6c07716d34f0b317b98f8e251435abd347951699f7aa3904</span><br><span class="line">Status: Downloaded newer image for mysql:latest</span><br><span class="line">docker.io/library/mysql:latest	# 真实地址</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">两条命令等价</span></span><br><span class="line">docker pull mysql = docker.io/library/mysql:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定版本下载</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker pull mysql:5.7</span><br><span class="line">5.7: Pulling from library/mysql</span><br><span class="line">4be315f6562f: Already exists</span><br><span class="line">96e2eb237a1b: Already exists</span><br><span class="line">8aa3ac85066b: Already exists</span><br><span class="line">ac7e524f6c89: Already exists</span><br><span class="line">f6a88631064f: Already exists</span><br><span class="line">15bb3ec3ff50: Already exists</span><br><span class="line">ae65dc337dcb: Already exists</span><br><span class="line">a4c4c43adf52: Pull complete</span><br><span class="line">c6cab33e8f91: Pull complete</span><br><span class="line">2e1c4f2c43f6: Pull complete</span><br><span class="line">2e5ee322af48: Pull complete</span><br><span class="line">Digest: sha256:e767595ba3408fbb2dda493be3594b9a148178df58325fafe8b0363662935624</span><br><span class="line">Status: Downloaded newer image for mysql:5.7</span><br><span class="line">docker.io/library/mysql:5.7</span><br></pre></td></tr></table></figure>

<p><img src="https://thumbnail0.baidupcs.com/thumbnail/ddf03d537gfb031e124eaf59015ab20f?fid=2267656288-250528-1043811625548138&time=1679403600&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-LG0iei5YeRgzwmHDZTs4FJt1JIw=&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=8770387549111721032&dp-callid=0&file_type=0&size=c710_u400&quality=100&vuk=-&ft=video" alt="image-20220430115345212"></p>
<h3 id="docker-rmi"><a href="#docker-rmi" class="headerlink" title="docker rmi"></a>docker rmi</h3><ul>
<li>删除镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zeroti@zeroti_PC:~$ docker rmi -f 镜像id	# 删除指定镜像</span><br><span class="line">zeroti@zeroti_PC:~$ docker rmi -f 镜像id 镜像id 镜像id 镜像id	# 删除多个镜像</span><br><span class="line">zeroti@zeroti_PC:~$ docker rmi -f $(docker images -aq)	# 删除全部镜像</span><br></pre></td></tr></table></figure>



<h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><p><strong>说明：有了镜像才可以创建容器</strong></p>
<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure>

<h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><ul>
<li>运行容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数说明</span></span><br><span class="line">--name=&quot;Name&quot;	容器名字，用来区分容器：tomcat01，tomcat02</span><br><span class="line">-d				后台方式运行</span><br><span class="line">-it				使用交互方式运行，进入容器查看内容</span><br><span class="line">-p				指定容器端口 -p 8080:8080</span><br><span class="line">	-p ip:主机端口:容器端口</span><br><span class="line">	-p 主机端口:容器端口 (常用)</span><br><span class="line">	-p 容器端口</span><br><span class="line">	容器端口</span><br><span class="line">-P(大写)		   随机指定端口</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动并进入容器</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker run -it centos /bin/bash</span><br><span class="line">[root@fd69e0861f85 /]# ls	# 查看容器内的centos，基础版本，很多命令不完善</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出容器回到主机</span></span><br><span class="line">[root@9c45858d0c26 /]# exit</span><br><span class="line">exit</span><br><span class="line">zeroti@zeroti_PC:~$</span><br></pre></td></tr></table></figure>

<h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h3><ul>
<li>查看运行的容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">	# </span><span class="language-bash">列出当前正在运行的容器</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line">-a	# 列出当前正在运行的容器+历史运行过的容器</span><br><span class="line">zeroti@zeroti_PC:~$ docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES</span><br><span class="line">9c45858d0c26   centos         &quot;/bin/bash&quot;   3 minutes ago   Exited (0) 3 minutes ago             dazzling_kare</span><br><span class="line">fd69e0861f85   centos         &quot;/bin/bash&quot;   2 hours ago     Exited (0) 2 hours ago               recursing_banach</span><br><span class="line">ec075c5483d5   feb5d9fea6a5   &quot;/hello&quot;      41 hours ago    Exited (0) 41 hours ago              silly_burnell</span><br><span class="line">8e62f7b2c7cb   feb5d9fea6a5   &quot;/hello&quot;      44 hours ago    Exited (0) 44 hours ago              distracted_faraday</span><br><span class="line"></span><br><span class="line">-n=[个数]	# 显示最近创建的容器</span><br><span class="line">zeroti@zeroti_PC:~$ docker ps -n=1</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">9c45858d0c26   centos    &quot;/bin/bash&quot;   11 minutes ago   Exited (0) 11 minutes ago             dazzling_kare</span><br><span class="line"></span><br><span class="line">-q	# 只显示容器id</span><br></pre></td></tr></table></figure>

<ul>
<li>退出容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exit	# 直接退出并停止容器</span><br><span class="line">ctrl+p+q	# 退出但不停止容器</span><br></pre></td></tr></table></figure>

<h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h3><ul>
<li>删除容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rm 容器id	# 删除指定容器，不能删除正在运行的容器，若需要强制删除需要加 -f</span><br><span class="line">docker rm -f $(docker ps -aq)	# 删除所有容器</span><br><span class="line">docker ps -aq|xargs docker rm	# 删除所有容器</span><br></pre></td></tr></table></figure>

<ul>
<li>启动和停止容器的操作</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker start 容器id	# 启动容器</span><br><span class="line">docker restar 容器id	# 重启容器</span><br><span class="line">docker stop 容器id	# 停止当前正在运行的容器</span><br><span class="line">docker kill 容器id	# 强制停止正在运行的容器</span><br></pre></td></tr></table></figure>

<h2 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a>常用其他命令</h2><h3 id="后台启动"><a href="#后台启动" class="headerlink" title="后台启动"></a>后台启动</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令 docker run -d 镜像名 启动容器</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker run -d centos</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">问题: docker ps，发现容器停止运行了</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">常见问题: docker 使用后台运行，就必须要有一个前台进程(docker f)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">容器启动后发现没有提供服务就会自己停止</span></span><br></pre></td></tr></table></figure>

<h3 id="查看日志命令"><a href="#查看日志命令" class="headerlink" title="查看日志命令"></a>查看日志命令</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果使用</span></span><br><span class="line">docker logs -tf --tail 容器id	</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">后没有日志</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自己编写一段shell脚本</span></span><br><span class="line">&quot;while true;do echo journal;sleep 1;done&quot;</span><br><span class="line"></span><br><span class="line">zeroti@zeroti_PC:~$ docker run -d centos /bin/bash -c &quot;while true;do echo journal;sleep 1;done&quot;</span><br><span class="line">9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0</span><br><span class="line">zeroti@zeroti_PC:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">9968fb448596   centos    &quot;/bin/bash -c &#x27;while…&quot;   17 seconds ago   Up 17 seconds             distracted_feistel</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示日志</span></span><br><span class="line">-tf		# 显示日志附带时间戳</span><br><span class="line">--tail number	# 显示number行的日志</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示指定行数的日志</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker logs -tf --tail 10 9968fb448596</span><br><span class="line">2022-05-10T02:44:14.894897600Z journal</span><br><span class="line">2022-05-10T02:44:15.896720900Z journal</span><br><span class="line">2022-05-10T02:44:16.898505000Z journal</span><br><span class="line">2022-05-10T02:44:17.900718200Z journal</span><br><span class="line">2022-05-10T02:44:18.903980000Z journal</span><br><span class="line">2022-05-10T02:44:19.906051900Z journal</span><br><span class="line">2022-05-10T02:44:20.909209400Z journal</span><br><span class="line">2022-05-10T02:44:21.911071400Z journal</span><br><span class="line">2022-05-10T02:44:22.912874900Z journal</span><br><span class="line">2022-05-10T02:44:23.915469200Z journal</span><br></pre></td></tr></table></figure>



<h3 id="查看容器中的进程信息"><a href="#查看容器中的进程信息" class="headerlink" title="查看容器中的进程信息"></a>查看容器中的进程信息</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zeroti@zeroti_PC:~$ docker top 9968fb448596</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY   </span><br><span class="line">root                1412                1393                0                   02:42               ?</span><br><span class="line">root                1831                1412                0                   02:48               ?</span><br></pre></td></tr></table></figure>

<h3 id="查看容器元数据"><a href="#查看容器元数据" class="headerlink" title="查看容器元数据"></a>查看容器元数据</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令</span></span><br><span class="line">dokcer inspect 容器id</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker inspect 9968fb448596</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-05-10T02:42:07.0043628Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/bin/bash&quot;,</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;-c&quot;,</span><br><span class="line">            &quot;while true;do echo journal;sleep 1;done&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 1412,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2022-05-10T02:42:07.4785849Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0/resolv.conf&quot;,</span><br><span class="line">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0/hostname&quot;,</span><br><span class="line">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0/hosts&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0/9968fb4485966a803b8732372b0c7218dc78cbd7f2df51dc54c27b98615cc1d0-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;/distracted_feistel&quot;,</span><br><span class="line">        &quot;RestartCount&quot;: 0,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ExecIDs&quot;: null,</span><br><span class="line">        &quot;HostConfig&quot;: &#123;</span><br><span class="line">            &quot;Binds&quot;: null,</span><br><span class="line">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LogConfig&quot;: &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class="line">                &quot;Config&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class="line">            &quot;RestartPolicy&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class="line">                &quot;MaximumRetryCount&quot;: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;AutoRemove&quot;: false,</span><br><span class="line">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class="line">            &quot;VolumesFrom&quot;: null,</span><br><span class="line">            &quot;CapAdd&quot;: null,</span><br><span class="line">            &quot;CapDrop&quot;: null,</span><br><span class="line">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class="line">            &quot;Dns&quot;: [],</span><br><span class="line">            &quot;DnsOptions&quot;: [],</span><br><span class="line">            &quot;DnsSearch&quot;: [],</span><br><span class="line">            &quot;ExtraHosts&quot;: null,</span><br><span class="line">            &quot;GroupAdd&quot;: null,</span><br><span class="line">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class="line">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Links&quot;: null,</span><br><span class="line">            &quot;OomScoreAdj&quot;: 0,</span><br><span class="line">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Privileged&quot;: false,</span><br><span class="line">            &quot;PublishAllPorts&quot;: false,</span><br><span class="line">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class="line">            &quot;SecurityOpt&quot;: null,</span><br><span class="line">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;ShmSize&quot;: 67108864,</span><br><span class="line">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class="line">            &quot;ConsoleSize&quot;: [</span><br><span class="line">                0,</span><br><span class="line">                0</span><br><span class="line">            ],</span><br><span class="line">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpuShares&quot;: 0,</span><br><span class="line">            &quot;Memory&quot;: 0,</span><br><span class="line">            &quot;NanoCpus&quot;: 0,</span><br><span class="line">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class="line">            &quot;BlkioWeight&quot;: 0,</span><br><span class="line">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class="line">            &quot;CpuPeriod&quot;: 0,</span><br><span class="line">            &quot;CpuQuota&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class="line">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Devices&quot;: [],</span><br><span class="line">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class="line">            &quot;DeviceRequests&quot;: null,</span><br><span class="line">            &quot;KernelMemory&quot;: 0,</span><br><span class="line">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class="line">            &quot;MemoryReservation&quot;: 0,</span><br><span class="line">            &quot;MemorySwap&quot;: 0,</span><br><span class="line">            &quot;MemorySwappiness&quot;: null,</span><br><span class="line">            &quot;OomKillDisable&quot;: false,</span><br><span class="line">            &quot;PidsLimit&quot;: null,</span><br><span class="line">            &quot;Ulimits&quot;: null,</span><br><span class="line">            &quot;CpuCount&quot;: 0,</span><br><span class="line">            &quot;CpuPercent&quot;: 0,</span><br><span class="line">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class="line">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class="line">            &quot;MaskedPaths&quot;: [</span><br><span class="line">                &quot;/proc/asound&quot;,</span><br><span class="line">                &quot;/proc/acpi&quot;,</span><br><span class="line">                &quot;/proc/kcore&quot;,</span><br><span class="line">                &quot;/proc/keys&quot;,</span><br><span class="line">                &quot;/proc/latency_stats&quot;,</span><br><span class="line">                &quot;/proc/timer_list&quot;,</span><br><span class="line">                &quot;/proc/timer_stats&quot;,</span><br><span class="line">                &quot;/proc/sched_debug&quot;,</span><br><span class="line">                &quot;/proc/scsi&quot;,</span><br><span class="line">                &quot;/sys/firmware&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ReadonlyPaths&quot;: [</span><br><span class="line">                &quot;/proc/bus&quot;,</span><br><span class="line">                &quot;/proc/fs&quot;,</span><br><span class="line">                &quot;/proc/irq&quot;,</span><br><span class="line">                &quot;/proc/sys&quot;,</span><br><span class="line">                &quot;/proc/sysrq-trigger&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/88bbb9c8b2656c6a8b6580f7538ba8b1ff3bf6bcd3e2edd6e0e5a27daca73d58-init/diff:/var/lib/docker/overlay2/09e4a53d9cdec08d015a731c06316d17523fc6faf41df2ac052bb75c56f91bce/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/88bbb9c8b2656c6a8b6580f7538ba8b1ff3bf6bcd3e2edd6e0e5a27daca73d58/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/88bbb9c8b2656c6a8b6580f7538ba8b1ff3bf6bcd3e2edd6e0e5a27daca73d58/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/88bbb9c8b2656c6a8b6580f7538ba8b1ff3bf6bcd3e2edd6e0e5a27daca73d58/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Mounts&quot;: [],</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;9968fb448596&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/bash&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;while true;do echo journal;sleep 1;done&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;desktop.docker.io/wsl-distro&quot;: &quot;Ubuntu&quot;,</span><br><span class="line">                &quot;org.label-schema.build-date&quot;: &quot;20210915&quot;,</span><br><span class="line">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class="line">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class="line">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class="line">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SandboxID&quot;: &quot;9209fcc1f8384614c3a5f3a00294059a8db152e0e150141d59dda6c646c666bf&quot;,</span><br><span class="line">            &quot;HairpinMode&quot;: false,</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class="line">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/9209fcc1f838&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;f13c8ddd000a8ff4e71d926f90a0be66d24bf60da6e983af1b38e4f2e57a6db3&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;8e2bba8950574fd42f9127fb1a66dbdc8e45d09b7a19acfd9d204304eb0d7942&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;f13c8ddd000a8ff4e71d926f90a0be66d24bf60da6e983af1b38e4f2e57a6db3&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">                    &quot;DriverOpts&quot;: null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="进入当前正在运行的命令"><a href="#进入当前正在运行的命令" class="headerlink" title="进入当前正在运行的命令"></a>进入当前正在运行的命令</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">容器通常以后台方式运行，需要进入容器修改配置</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令</span></span><br><span class="line">docker exec -it 容器id bashshell</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">9968fb448596   centos    &quot;/bin/bash -c &#x27;while…&quot;   20 minutes ago   Up 20 minutes             distracted_feistel</span><br><span class="line">zeroti@zeroti_PC:~$ docker exec -it 9968fb448596 /bin/bash</span><br><span class="line">[root@9968fb448596 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@9968fb448596 /]# ps -ef</span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class="line">root         1     0  0 02:42 ?        00:00:00 /bin/bash -c while true;do echo journal;sleep 1;done</span><br><span class="line">root      1279     0  0 03:03 pts/0    00:00:00 /bin/bash</span><br><span class="line">root      1326     1  0 03:03 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sle</span><br><span class="line">root      1327  1279  0 03:03 pts/0    00:00:00 ps -ef</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">方式二</span></span><br><span class="line">docker attach 容器id</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker attach 9968fb448596</span><br><span class="line">当前正在执行的代码...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker <span class="built_in">exec</span> 	<span class="comment"># 进入容器后开启一个新的终端，可以在里面操作（常用）</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker attach	<span class="comment"># 进入容器正在执行的终端，不会启动新的进程</span></span></span><br></pre></td></tr></table></figure>

<h3 id="从容器内拷贝文件到主机上"><a href="#从容器内拷贝文件到主机上" class="headerlink" title="从容器内拷贝文件到主机上"></a>从容器内拷贝文件到主机上</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker cp 容器id:容器内路径 目的主机路径</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前主机目录下</span></span><br><span class="line">zeroti@zeroti_PC:~$ cd /home</span><br><span class="line">zeroti@zeroti_PC:/home$ sudo mkdir test</span><br><span class="line">[sudo] password for zeroti:</span><br><span class="line">zeroti@zeroti_PC:/home$ ls</span><br><span class="line">test  zeroti</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入容器</span></span><br><span class="line">zeroti@zeroti_PC:/home$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">03edb435a99a   centos    &quot;/bin/bash&quot;   26 seconds ago   Up 25 seconds             recursing_rosalind</span><br><span class="line">zeroti@zeroti_PC:/home$ docker attach 03edb435a99a</span><br><span class="line">[root@03edb435a99a /]# cd /home</span><br><span class="line">[root@03edb435a99a home]# ls</span><br><span class="line">[root@03edb435a99a home]# touch docekrtest</span><br><span class="line">[root@03edb435a99a home]# ls</span><br><span class="line">docekrtest</span><br><span class="line">[root@03edb435a99a home]# exit</span><br><span class="line">exit</span><br><span class="line">zeroti@zeroti_PC:/home$ sudo docker cp 03edb435a99a:/home/docekrtest /home</span><br><span class="line">zeroti@zeroti_PC:/home$ ls</span><br><span class="line">docekrtest  test  zeroti</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>port  	  # 查看映射端口对应的容器内部源端口<br>pause	  # 暂停容器<br>ps        # 猎户容器列表<br>pull      # 从docker镜像源服务器拉取指定镜像或者库镜像<br>push      # 推送指定镜像或者库镜像至docker源服务器<br>restart   # 重启运行的容器<br>rm        # 移除一个或多个容器<br>rmi       # 移除一个或多个镜像 （无容器使用该镜像才可删除，否则需要删除相关容器才可继续或 -f 强制删除）<br>run       # 创建一个新的容器并运行一个命令<br>save      # 保存一个镜像为一个 tar 包【对应 load】<br>search    # 在 docker hub 中搜索镜像<br>start     # 启动容器<br>stop      # 停止容器<br>tag       # 给源中镜像打标签<br>top       # 查看容器中运行的进程信息<br>unpause   # 取消暂停容器<br>version   # 查看 docker版本号<br>wait      # 截取容器停止时的退出状态值</p>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><h2 id="例一（Docker安装Nginx）"><a href="#例一（Docker安装Nginx）" class="headerlink" title="例一（Docker安装Nginx）"></a>例一（Docker安装Nginx）</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. 搜索镜像</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker search nginx</span><br><span class="line">NAME                                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">nginx                                             Official build of Nginx.                        16876     [OK]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. 拉取镜像</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">42c077c10790: Pull complete</span><br><span class="line">62c70f376f6a: Pull complete</span><br><span class="line">915cc9bd79c2: Pull complete</span><br><span class="line">75a963e94de0: Pull complete</span><br><span class="line">7b1fab684d70: Pull complete</span><br><span class="line">db24d06d5af4: Pull complete</span><br><span class="line">Digest: sha256:2bcabc23b45489fb0885d69a06ba1d648aeda973fae7bb981bafbb884165e514</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3. 查看镜像</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">nginx         latest    0e901e68141f   2 days ago     142MB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以后台方式把nginx挂载到本地3344端口</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-d	后台运行</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--name [容器名]	给容器命名</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-p [本地端口]:[nginx内部端口]</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker run -d --name nginx01 -p 3344:80 nginx</span><br><span class="line">47f4f5cbbaffb6e385a53e8e9ed78a950abf9b014e24cb866f6b5531561efffc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看运行的镜像</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS              PORTS                  NAMES</span><br><span class="line">47f4f5cbbaff   nginx     &quot;/docker-entrypoint.…&quot;   About a minute ago   Up About a minute   0.0.0.0:3344-&gt;80/tcp   nginx01</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看本地3344端口映射的nginx</span></span><br><span class="line">zeroti@zeroti_PC:~$ curl localhost:3344</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入nginx</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker exec -it nginx01 /bin/bash</span><br><span class="line">root@47f4f5cbbaff:/# ls</span><br><span class="line">bin   dev                  docker-entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">boot  docker-entrypoint.d  etc                   lib   media  opt  root  sbin  sys  usr</span><br><span class="line">root@47f4f5cbbaff:/# whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class="line">root@47f4f5cbbaff:/# cd /etc/nginx/</span><br><span class="line">root@47f4f5cbbaff:/etc/nginx# ls</span><br><span class="line">conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params</span><br></pre></td></tr></table></figure>

<p>端口暴露的概念：</p>
<p><img src="https://thumbnail0.baidupcs.com/thumbnail/bf713ddc7la6edb2586ab0e04217ae5e?fid=2267656288-250528-317972083161356&time=1679403600&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-ogh9VtxKoFWk7DSdXQPacsLTIJo=&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=8770370098478020900&dp-callid=0&file_type=0&size=c710_u400&quality=100&vuk=-&ft=video" alt="端口暴露"></p>
<h2 id="例二（Docker安装tomcat）"><a href="#例二（Docker安装tomcat）" class="headerlink" title="例二（Docker安装tomcat）"></a>例二（Docker安装tomcat）</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.官方的使用</span></span><br><span class="line">docker run -it --rm tomcat:9.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--<span class="built_in">rm</span>方式一般用来测试，用完之后就会自动删除</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker run -it --rm tomcat:9.0</span><br><span class="line">Unable to find image &#x27;tomcat:9.0&#x27; locally</span><br><span class="line">9.0: Pulling from library/tomcat</span><br><span class="line">e756f3fdd6a3: Pull complete</span><br><span class="line">bf168a674899: Pull complete</span><br><span class="line">e604223835cc: Pull complete</span><br><span class="line">6d5c91c4cd86: Pull complete</span><br><span class="line">5e20d165240e: Pull complete</span><br><span class="line">1334d60df9a8: Pull complete</span><br><span class="line">16c2728dcd90: Pull complete</span><br><span class="line">05288798d23d: Pull complete</span><br><span class="line">22cc5e0633cb: Pull complete</span><br><span class="line">0c572f1a581a: Pull complete</span><br><span class="line">Digest: sha256:c20ac4dab13ca6ecd9e29cba39a3c34bb2f155528133315b1773b08012912deb</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">运行结束后使用docker ps发现找不到镜像（已被删除）</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                     PORTS     NAMES</span><br><span class="line">47f4f5cbbaff   nginx     &quot;/docker-entrypoint.…&quot;   26 minutes ago   Exited (0) 9 minutes ago             nginx01</span><br><span class="line">03edb435a99a   centos    &quot;/bin/bash&quot;              3 weeks ago      Exited (0) 3 weeks ago               recursing_rosalind</span><br></pre></td></tr></table></figure>

<p><strong>一般情况</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载镜像</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker pull tomcat</span><br><span class="line">latest: Pulling from library/tomcat</span><br><span class="line">e756f3fdd6a3: Already exists</span><br><span class="line">bf168a674899: Already exists</span><br><span class="line">e604223835cc: Already exists</span><br><span class="line">6d5c91c4cd86: Already exists</span><br><span class="line">5e20d165240e: Already exists</span><br><span class="line">1334d60df9a8: Already exists</span><br><span class="line">16c2728dcd90: Already exists</span><br><span class="line">05288798d23d: Already exists</span><br><span class="line">c022dc2b2581: Pull complete</span><br><span class="line">d86ac2f896ee: Pull complete</span><br><span class="line">Digest: sha256:b4e84cff017ff5202cb760ccb1373dd950158f926d6afb04bd5e9f7337291501</span><br><span class="line">Status: Downloaded newer image for tomcat:latest</span><br><span class="line">zeroti@zeroti_PC:~$ docker images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">tomcat        latest    c795915cb678   2 days ago     680MB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动运行镜像</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker run -d -p 3355:8080 --name tomcat01 tomcat</span><br><span class="line">1c7cce5adc2175a53744a041b82e78a4df388b9f0feaa9b9a6e5e8389b07dbd9</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试访问没有问题,但报错404</span></span><br><span class="line">http://localhost:3355/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入容器</span></span><br><span class="line">zeroti@zeroti_PC:~$ docker exec -it tomcat01 /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">发现问题：1.缺少linux命令，2. 缺少webapps</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">镜像原因，默认下载最小镜像（剔除所有非必要，只能保证最小环境运行）</span></span><br></pre></td></tr></table></figure>

<p>思考：以后部署项目，每次进入容器非常麻烦，在容器外放置路径映像到内部</p>
]]></content>
  </entry>
  <entry>
    <title>Markdown基础语法</title>
    <url>/2023/03/22/Markdown%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<h1 id="Markdown学习"><a href="#Markdown学习" class="headerlink" title="Markdown学习"></a>Markdown学习</h1><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 二级胞体</span><br><span class="line">### 三级标题</span><br></pre></td></tr></table></figure>



<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p><strong>hello world</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">**加粗**</span><br></pre></td></tr></table></figure>

<p><em>hello world</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*斜体*</span><br></pre></td></tr></table></figure>

<p><em><strong>hello world</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">***加粗斜体***</span><br></pre></td></tr></table></figure>

<p><del>hello world</del></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">~~划线~~</span><br></pre></td></tr></table></figure>



<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><blockquote>
<p>引用一段文字</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; 引用</span><br></pre></td></tr></table></figure>



<h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><hr>
<hr>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br></pre></td></tr></table></figure>



<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p><img src="https://img0.baidu.com/it/u=4203121738,2775154864&fm=253&app=138&size=w931&n=0&f=JPG&fmt=auto?sec=1679590800&t=06c493381a133e654ebff09e1ec39098" alt="截图"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">![图片名](图片路径)</span><br></pre></td></tr></table></figure>



<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><p><a href="https://www.bilibili.com/">跳转bilibili</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[文字](跳转链接)</span><br></pre></td></tr></table></figure>



<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><ol>
<li>A</li>
<li>B</li>
<li>C</li>
</ol>
<ul>
<li>A</li>
<li>B</li>
<li>C</li>
</ul>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><table>
<thead>
<tr>
<th>名字</th>
<th>性别</th>
<th>生日</th>
</tr>
</thead>
<tbody><tr>
<td>张三</td>
<td>男</td>
<td>2000.1.1</td>
</tr>
</tbody></table>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ctrl+shift+k</span><br></pre></td></tr></table></figure>

]]></content>
  </entry>
  <entry>
    <title>Ubuntu升级glibc2.36</title>
    <url>/2023/03/23/Ubuntu%E5%8D%87%E7%BA%A7glibc2-36/</url>
    <content><![CDATA[<ol>
<li>查看现有版本</li>
</ol>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zeroti@zeroti_PC:~$ ldd --version</span><br><span class="line">ldd (GNU libc) 2.35</span><br><span class="line">Copyright (C) 2022 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><span class="line">Written by Roland McGrath and Ulrich Drepper.</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>下载指定版本的gblic：<a href="https://ftp.gnu.org/gnu/glibc/">https://ftp.gnu.org/gnu/glibc/</a></p>
</li>
<li><p>解压到随意路径后进行编译</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd glibc-2.36	#进入解压的路径</span><br><span class="line">sudo mkdir build &amp;&amp; cd build	#新建build文件夹并进入</span><br><span class="line">../configure --prefix=/usr/local --disable-sanity-checks  #需要参数</span><br><span class="line">sudo make -j4		#开始编译</span><br><span class="line">sudo make install	#安装</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果正常安装就完成了</p>
</li>
</ol>
<ul>
<li><p>如果报错<strong>Can’t open configuration file &#x2F;usr&#x2F;local&#x2F;etc&#x2F;ld.so.conf: No such file or directory</strong>就是缺少了必要的编译文件 ld.so.conf。通过 find 命令找到对应的文件位置。</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find / -name &quot;ld.so.conf&quot;</span><br><span class="line">cp /etc/ld.so.conf /usr/local/etc/</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <tags>
        <tag>提示&quot;version `GLIBC_2.36&#39; not found&quot;的解决办法</tag>
      </tags>
  </entry>
</search>
